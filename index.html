<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>ScrapGram</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="app-wrapper">
    <!-- ЭКРАН 1: АВТОРИЗАЦИЯ / ПРОФИЛИ -->
    <div id="scr-auth" class="screen active">
      <div class="auth-content">
        <div class="brand-zone">
          <div class="logo-glow"><i class="fa-solid fa-atom"></i></div>
          <h1>Scrap<span>Gram</span></h1>
          <p>Выберите профиль для входа</p>
        </div>
        <div id="profiles-grid" class="profiles-grid"></div>
        <div class="create-acc-bar">
          <input type="text" id="nick-input" placeholder="Имя нового профиля" autocomplete="off">
          <button class="add-btn" onclick="addProfile()"><i class="fa-solid fa-plus"></i></button>
        </div>
      </div>
    </div>

    <!-- ЭКРАН 2: ОСНОВНОЕ ПРИЛОЖЕНИЕ -->
    <div id="scr-app" class="screen">
      <header class="app-header">
        <div class="user-meta" onclick="toProfiles()">
          <div class="avatar-box" id="hdr-av">?</div>
          <div class="user-txt">
            <b id="hdr-nick">User</b>
            <div class="profile-switch-chip"><i class="fa-solid fa-arrows-rotate"></i><span>Сменить</span></div>
          </div>
        </div>
        <button class="btn-circle-plus" onclick="openModal('mod-join')"><i class="fa-solid fa-plus"></i></button>
      </header>

      <div class="view-viewport">
        <!-- ГЛАВНАЯ: СПИСОК КАНАЛОВ -->
<section class="page active" id="view-home">
 <!-- Блок Соцсетей -->
 <div class="section-divider">
  <h3>Ресурсы экосистемы</h3>
 </div>
 <div class="social-links-grid">
  <a href="https://t.me/scrap_gram" target="_blank" class="social-card tg">
   <i class="fa-brands fa-telegram"></i>
   <span>Telegram</span>
  </a>
  <a href="https://github.com/sendox2012-debug/scrap-gram" target="_blank" class="social-card gh">
   <i class="fa-brands fa-github"></i>
   <span>GitHub</span>
  </a>
 </div>

 <!-- Блок Публичных Комнат -->
 <div class="section-divider">
  <h3>Публичные Хабы</h3>
  <div class="live-badge"></div>
 </div>
 <div id="public-rooms-grid" class="rooms-grid-cool">
  <!-- Сюда скрипт вставит карточки -->
 </div>

 <!-- Блок Личных Комнат -->
 <div class="section-divider">
  <h3>Ваша активность</h3>
 </div>
 <div id="room-list" class="rooms-feed">
  <div class="empty-state">Нет активных приватных сессий</div>
 </div>
</section>


        <!-- ЧАТ -->
        <section class="page" id="view-chat">
          <div id="chat-closed" class="chat-placeholder">
            <i class="fa-solid fa-comments"></i>
            <p>Канал не выбран</p>
          </div>

          <div id="chat-active" class="chat-ui" style="display: none;">
            <div class="chat-header">
              <button class="back-link" onclick="switchView('home', document.querySelector('.nav-item'))"><i class="fa-solid fa-chevron-left"></i></button>
              <div class="room-info">
                <b id="active-room-name">#room</b>
                <span class="secure-tag"><i class="fa-solid fa-shield-halved"></i> E2EE Active</span>
              </div>
              <button class="refresh-btn" onclick="loadMessages()"><i class="fa-solid fa-rotate"></i></button>
            </div>
            
            <div id="msg-box" class="msg-box"></div>
            <div id="upload-status" class="status-bar" style="display:none;">Обработка медиа...</div>

            <div class="chat-controls">
              <div class="input-bar">
                <button onclick="document.getElementById('file-inp').click()"><i class="fa-solid fa-paperclip"></i></button>
                <input type="file" id="file-inp" style="display:none">
                <input type="text" id="msg-inp" placeholder="Написать..." autocomplete="off">
                <button id="voice-btn" onclick="toggleRecording()"><i class="fa-solid fa-microphone"></i></button>
                <button onclick="sendMessage()"><i class="fa-solid fa-paper-plane"></i></button>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- СТРАНИЦА КОНФИДЕНЦИАЛЬНОСТИ -->
<section class="page" id="view-privacy">
  <div class="privacy-content">
    
    <!-- Шапка страницы -->
    <div class="privacy-header">
      <div class="logo-glow" style="margin: 0 auto 15px;"><i class="fa-solid fa-shield-halved"></i></div>
      <h2>Безопасность<span> E2EE</span></h2>
      <p>Твои данные под защитой ScrapGram</p>
    </div>
    
    <!-- Карточки с инфой -->
    <div class="info-card">
      <h4><i class="fa-solid fa-user-secret"></i> Нулевое хранение</h4>
      <p>Мы не храним историю сообщений на серверах. Все данные живут только в оперативной памяти и удаляются после завершения сессии.</p>
    </div>

    <div class="info-card">
      <h4><i class="fa-solid fa-key"></i> Локальные ключи</h4>
      <p>Пароль (Seed-фраза) шифрования хранится исключительно в твоем браузере. Если ты его забудешь, доступ к сообщениям восстановить невозможно.</p>
    </div>

    <div class="info-card">
      <h4><i class="fa-solid fa-microchip"></i> AES-256 Алгоритм</h4>
      <p>Для защиты канала используется военный стандарт шифрования. Каждое сообщение — это нечитаемый код для всех, кроме участников чата.</p>
    </div>

    <div class="info-card">
      <h4><i class="fa-solid fa-hand-holding-hand"></i> Открытый код</h4>
      <p>Протоколы ScrapGram прозрачны. Ты всегда можешь проверить исходный код проекта на нашем GitHub.</p>
    </div>

    <!-- Футер -->
    <div class="privacy-footer">
      <p><i class="fa-solid fa-circle-check"></i> Соединение защищено</p>
      <small>Version 1.1 - beta | ScrapGram Security Protocol</small>
    </div>

  </div>
</section>


      <!-- НАВИГАЦИЯ -->
<nav class="bottom-nav">
  <div class="nav-item active" onclick="switchView('home', this)">
    <i class="fa-solid fa-compass"></i>
    <span>Обзор</span>
  </div>
  <div class="nav-item" onclick="switchView('chat', this)">
    <i class="fa-solid fa-message"></i>
    <span>Чат</span>
  </div>
  <!-- Новая кнопка -->
  <div class="nav-item" onclick="switchView('privacy', this)">
    <i class="fa-solid fa-shield-halved"></i>
    <span>Защита</span>
  </div>
</nav>


  <!-- МОДАЛКА ВХОДА В КАНАЛ -->


<!-- Само модальное окно (должно быть ВНЕ всех секций, лучше в самом конце body) -->
<div id="mod-join" class="modal">
 <div class="modal-card">
  <div class="modal-head" style="margin-bottom: 20px; text-align: center;">
   <h3 style="margin:0; color:var(--blue);">Вход в канал</h3>
   <p style="font-size: 12px; opacity: 0.5;">Введите ID Gist-файла и пароль</p>
  </div>
  
  <input type="text" id="j-rid" placeholder="ID (напр: chat-room)" style="width:100%; margin-bottom:15px; padding:15px; border-radius:12px; background:#1a1a1a; border:1px solid #333; color:#fff;">
  <input type="password" id="j-seed" placeholder="Пароль шифрования" style="width:100%; margin-bottom:20px; padding:15px; border-radius:12px; background:#1a1a1a; border:1px solid #333; color:#fff;">
  
  <div class="modal-btns" style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
   <button class="btn-cancel" onclick="closeModal('mod-join')" style="padding:15px; border-radius:12px; border:none; background:#222; color:#fff;">Отмена</button>
   <button class="btn-blue" onclick="joinRoomAction()" style="margin:0;">Войти</button>
  </div>
 </div>
</div>



<script src="script.js"></script>

</body>
</html>
